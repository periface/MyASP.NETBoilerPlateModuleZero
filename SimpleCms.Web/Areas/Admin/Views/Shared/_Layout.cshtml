@using System.Threading
@using System.Web.Optimization
<!DOCTYPE html>
<html lang="en">
<head>
    @*<meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <link rel="shortcut icon" href="~/favicon.ico">

        <title>SimpleCms</title>*@

    @{Html.RenderAction("SiteInformationHeader", "Layout", new { Area = "Admin" });}

    @*@Styles.Render("~/Bundles/vendor/css")
        @Styles.Render("~/Bundles/css")*@
    @*@Styles.Render("~/content/smartadmin")*@

    <!-- Basic Styles -->
    <link rel="stylesheet" type="text/css" media="screen" href="../../../../Content/css/bootstrap.min.css">
    @*<link rel="stylesheet" type="text/css" media="screen" href="../../../../Content/css/font-awesome.min.css">*@
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    <!-- SmartAdmin Styles : Caution! DO NOT change the order -->
    <link rel="stylesheet" type="text/css" media="screen" href="../../../../Content/css/smartadmin-production-plugins.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../../../../Content/css/smartadmin-production.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../../../../Content/css/smartadmin-skins.min.css">

    <!-- SmartAdmin RTL Support -->
    <link rel="stylesheet" type="text/css" media="screen" href="../../../../Content/css/smartadmin-rtl.min.css">

    <!-- We recommend you use "your_style.css" to override SmartAdmin
         specific styles this will also ensure you retrain your customization with each SmartAdmin update.
    <link rel="stylesheet" type="text/css" media="screen" href="css/your_style.css"> -->
    <!-- GOOGLE FONT -->
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,300,400,700">
    @Styles.Render("~/Bundles/vendor/cssNoConflict")
    <!-- FAVICONS -->
    <!-- View specific styles -->
    <style>
        a {
            cursor: pointer;
        }
    </style>
    @RenderSection("styles", required: false)

    <script type="text/javascript">
        //This is used to get the application's root path from javascript. It's useful if you're running application in a virtual directory under IIS.
        var abp = abp || {}; abp.appPath = '@ApplicationPath';
    </script>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="@Url.Content("~/Scripts/others/html5shiv.js")"></script>
        <script src="@Url.Content("~/Scripts/others/respond.min.js")"></script>
    <![endif]-->

    @Scripts.Render("~/Bundles/vendor/js/top")

</head>
<body @*class="smart-style-4"*@>

    @Html.Partial("_adminTopBar", new { Area = "Admin" })

    <div id="main" role="main">
        @RenderBody()
    </div>
    <div class="page-footer">
        <div class="row">
            <div class="col-xs-12 col-sm-6">
                <span class="txt-color-white">SmartAdmin 1.7.0 <span class="hidden-xs"> - Web Application Framework</span> © 2014-2015</span>
            </div>

            <div class="col-xs-6 col-sm-6 text-right hidden-xs">
                <div class="txt-color-white inline-block">
                    <i class="txt-color-blueLight hidden-mobile">Last account activity <i class="fa fa-clock-o"></i> <strong>52 mins ago &nbsp;</strong> </i>
                    <div class="btn-group dropup">
                        <button class="btn btn-xs dropdown-toggle bg-color-blue txt-color-white" data-toggle="dropdown">
                            <i class="fa fa-link"></i> <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu pull-right text-left">
                            <li>
                                <div class="padding-5">
                                    <p class="txt-color-darken font-sm no-margin">Download Progress</p>
                                    <div class="progress progress-micro no-margin">
                                        <div class="progress-bar progress-bar-success" style="width: 50%;"></div>
                                    </div>
                                </div>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <div class="padding-5">
                                    <p class="txt-color-darken font-sm no-margin">Server Load</p>
                                    <div class="progress progress-micro no-margin">
                                        <div class="progress-bar progress-bar-success" style="width: 20%;"></div>
                                    </div>
                                </div>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <div class="padding-5">
                                    <p class="txt-color-darken font-sm no-margin">Memory Load <span class="text-danger">*critical*</span></p>
                                    <div class="progress progress-micro no-margin">
                                        <div class="progress-bar progress-bar-danger" style="width: 70%;"></div>
                                    </div>
                                </div>
                            </li>
                            <li class="divider"></li>
                            <li>
                                <div class="padding-5">
                                    <button class="btn btn-block btn-default">refresh</button>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <!-- end btn-group-->
                </div>
                <!-- end div-->
            </div>
            <!-- end col -->
        </div>
        <!-- end row -->
    </div>
    <!-- #SHORTCUT AREA : With large tiles (activated via clicking user name tag)
             Note: These tiles are completely responsive, you can add as many as you like -->
    <div id="shortcut">
        <ul>
            <li>
                <a href="#ajax/calendar.html" class="jarvismetro-tile big-cubes bg-color-orangeDark"> <span class="iconbox"> <i class="fa fa-calendar fa-4x"></i> <span>Calendar</span> </span> </a>
            </li>
            <li>
                <a href="#ajax/invoice.html" class="jarvismetro-tile big-cubes bg-color-blueDark"> <span class="iconbox"> <i class="fa fa-book fa-4x"></i> <span>Report Something </span> </span> </a>
            </li>

            <li>
                <a href="#ajax/profile.html" class="jarvismetro-tile big-cubes selected bg-color-pinkDark"> <span class="iconbox"> <i class="fa fa-user fa-4x"></i> <span>My Profile </span> </span> </a>
            </li>
        </ul>
    </div>
    <!-- END SHORTCUT AREA -->
    <!-- Modal -->
    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" id="modalConfig" role="document">
            <div class="modal-content" id="modalContent">

            </div>
        </div>
    </div>

    @Scripts.Render("~/Bundles/vendor/js/bottom")
    @Scripts.Render("~/Bundles/js")

    <script src="~/api/AbpServiceProxies/GetAll"></script>
    <script src="~/AbpScripts/GetScripts" type="text/javascript"></script>
    <script src="~/signalr/hubs"></script>
    <script src="~/Abp/Framework/scripts/libs/abp.signalr.js"></script>
    <!-- IMPORTANT: APP CONFIG -->
    <script src="~/Scripts/app.config.js"></script>

    <!-- JS TOUCH : include this plugin for mobile drag / drop touch events-->
    <script src="~/Scripts/plugin/jquery-touch/jquery.ui.touch-punch.min.js"></script>

    <!-- JARVIS WIDGETS -->
    <script src="~/Scripts/smartwidgets/jarvis.widget.min.js"></script>
    <!-- CUSTOM NOTIFICATION -->
    <script src="~/Scripts/notification/SmartNotification.min.js"></script>

    <!-- JQUERY MASKED INPUT -->
    <script src="~/Scripts/plugin/masked-input/jquery.maskedinput.min.js"></script>

    <!-- browser msie issue fix -->
    <script src="~/Scripts/plugin/msie-fix/jquery.mb.browser.min.js"></script>

    <!-- FastClick: For mobile devices -->
    <script src="~/Scripts/plugin/fastclick/fastclick.min.js"></script>

    <!--[if IE 8]>

    <h1>Your browser is out of date, please update your browser by going to www.microsoft.com/download</h1>

    <![endif]-->
    <!-- Demo purpose only -->
    @*<script src="~/Scripts/demo.min.js"></script>*@

    <!-- MAIN APP JS FILE -->
    <script src="~/Scripts/app.min.js"></script>


    <script>
        //Localizing momentjs
        moment.locale('@Thread.CurrentThread.CurrentUICulture.Name');
    </script>

    <script src="~/Scripts/Admin/GlobalPermissions.js"></script>
    <script src="~/Scripts/Admin/GlobalConfigs.js"></script>
    <script src="~/Scripts/Admin/GlobalModal.js"></script>
    <!-- View specific scripts -->
    @RenderSection("scripts", required: false)
    <script>
        var reloadNotifications = function () {
            $("#notifications").empty();
            abp.ajax({
                url: "/Admin/Layout/Notifications"
            }).done(function (d) {
                var count = d.length;
                $.each(d, function (i, d) {
                    if (d.notification.notificationName === "CreatedRole") {
                        $("#notifications").append("<li><a href='/Admin/Roles?role=" + d.notification.data.roleName + "' class='notification'>" + d.notification.data.creatorName + " has created a new Role: " + d.notification.data.roleName + "</a></li>");
                    }
                });
                $("#notifications").append("<li><hr></li>");
                $("#notifications").append("<li><a  class='checkAll'>Clear</a></li>");
            });
        }
        $("body").on("click", ".checkAll", function() {
            abp.ajax({
                url: "/Admin/Layout/MarkAllAsReaded"
            }).done(function() {
                reloadNotifications();
            });
        });
        $(document).ready(function () {
            reloadNotifications();
        });
        abp.event.on('abp.notifications.received', function (data) {
            abp.notify.success("one new notification");
            reloadNotifications();
        });
    </script>
</body>
</html>
